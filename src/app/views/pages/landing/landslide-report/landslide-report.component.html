<app-landing-navbar></app-landing-navbar>
<link href="https://api.mapbox.com/mapbox-gl-js/v3.4.0/mapbox-gl.css" rel="stylesheet" />
<div class="bg-image-container" id="home">
  <div class="report-container">
    <div class="report-card">
      <h1 class="report-title">Report a Landslide Incident</h1>
      <form [formGroup]="reportForm" class="report-form" (ngSubmit)="submitForm()">
        <div class="form-group">
          <label for="dateTimePicker">Date and Time</label>
          <div class="date-time-row">
            <input
              class="form-control report-input"
              placeholder="yyyy-mm-dd"
              ngbDatepicker
              #d="ngbDatepicker"
              (click)="d.toggle()"
              formControlName="date"
              aria-label="Date"
            />
            <input
              type="time"
              class="form-control report-input"
              formControlName="time"
              aria-label="Time"
            />
          </div>
        </div>
        <div class="form-group">
          <label for="location">Location</label>
          <div class="location-row">
            <div class="dropdown-group">
              <input
                class="form-control report-input"
                [value]="selectedMunicipality?.name"
                readonly
                formControlName="municipality"
                aria-label="Municipality"
              />
              <div ngbDropdown>
                <button type="button" class="btn report-dropdown-btn" ngbDropdownToggle>
                  Select Municipality
                </button>
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                  <button
                    type="button"
                    ngbDropdownItem
                    *ngFor="let municipality of municipalities"
                    (click)="selectMunicipality(municipality)"
                  >
                    {{ municipality.name }}
                  </button>
                </div>
              </div>
            </div>
            <div class="dropdown-group">
              <input
                class="form-control report-input"
                [value]="selectedBarangay?.name"
                readonly
                formControlName="barangay"
                aria-label="Barangay"
              />
              <div ngbDropdown>
                <button type="button" class="btn report-dropdown-btn" ngbDropdownToggle>
                  Select Barangay
                </button>
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                  <button
                    type="button"
                    ngbDropdownItem
                    *ngFor="let barangay of barangays"
                    (click)="selectBarangay(barangay)"
                  >
                    {{ barangay.name }}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="map">Location on Map</label>
          <div id="map" class="report-map"></div>
        </div>
        <div class="form-group">
          <label for="remarks">Other Remarks</label>
          <textarea
            class="form-control report-input"
            id="remarks"
            name="remarks"
            rows="3"
            placeholder="Add remarks"
            formControlName="remarks"
            aria-label="Other remarks"
          ></textarea>
        </div>
        <button type="submit" class="btn report-submit-btn" [disabled]="isLoading">
          {{ isLoading ? "Submitting" : "Submit" }}
        </button>
      </form>
    </div>
  </div>
</div>
<app-landing-footer></app-landing-footer>
